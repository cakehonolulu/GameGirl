#include "include/cb_opcodes.h"

const struct m_sharp_lr35902_instr_cb m_gb_instr_cb[256] = {
	{NULL, NULL},							// 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL},                           // 0x00
	{NULL, NULL}                           	// 0x00
};

void m_cb_ext(gb_mmu_t *gb_mmu, gb_registers_t *m_regs, uint16_t m_instr)
{
	
}

/*
	BIT 7, H
	Opcode: 0xCB7C
	Number of Bytes: 2
	Number of Cycles: 2

	Copy the complement of the contents of bit 7 in register H
	to the Z flag of the program status word (PSW).
*/
void m_bit_7_h(gb_mmu_t *gb_mmu, gb_registers_t *m_regs)
{
	if (!m_is_bit_set(m_regs->h, Z))
	{
		FLAG_SET(m_regs->flags, Z);
	} else {
		FLAG_UNSET(m_regs->flags, Z);
	}

	FLAG_UNSET(m_regs->flags, N);

	FLAG_SET(m_regs->flags, H);
#ifdef OPCODE_DEBUG
	printf("Flags: 0x%02x\n", m_regs->flags);
#endif
	m_regs->pc += 2;
}
